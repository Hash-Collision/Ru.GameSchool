@model IEnumerable<Ru.GameSchool.DataLayer.Repository.LevelProject>
@{
    ViewBag.Title = "Listi yfir verkefni";
}
<h2>
    Verkefnin mín</h2>
@section sidebar {
    @if (User.IsInRole("Teacher"))
    {
        @Html.Partial("_TeacherSideBar")
    }
    else
    {
@*@Html.Partial("_LeftSideBar")*@
    }
}
@foreach (var items in ViewBag.Courses)
{
    <table class="table table-striped table-bordered table-condensed">
        <tbody>
            <tr>
                <th>@items.Identifier @items.Name
                </th>
                <th>
                    Einkunn
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.GradePercentageValue)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Description)
                </th>
            </tr>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.ActionLink((@item.Name + " - Skiladagur: " + @item.Stop.ToString("dd.MM.yyyy HH:mm")) as string, User.IsInRole("Student") ? "Get" : "Edit", new { LevelProjectId = @item.LevelProjectId })
                    </td>
                    <td>
                        @if (Math.Abs(item.LevelProjectResults.Select(x => x.Grade).FirstOrDefault()) > 0)
                        {
                            @item.LevelProjectResults.Select(x => x.Grade).FirstOrDefault()
                        }
                        else
                        {
                            <i>Enginn einkunn kominn</i>          
                        }
                    </td>
                    <td>
                        Vægi: @Html.DisplayFor(modelItem => item.GradePercentageValue)%
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                </tr>
            }
        </tbody>
    </table>

}
@if (User.IsInRole("Teacher"))
{
    <p>
        <button name="button" class="btn btn-success" value="Create" onclick="location.href='@Url.Action("Create", "Project")'">
            Búa til nýtt verkefni</button>
    </p>
}